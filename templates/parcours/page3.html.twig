{% extends 'base.html.twig' %}

{% block title %}Parcours Page 3{% endblock %}

{% block content %}

    <script src="{{ asset('js/pannellum.js') }}"></script>
    <link rel="stylesheet" href="{{ asset('css/pannellum.css') }}">

    <body>
    <h1>Étape 3 : Cliquer, dans le bon ordre, sur les 2 endroits où placer les extremités du piquet de MALT</h1>

    <div id="panorama" style="width: 100%; height: 800px;"></div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let viewer = pannellum.viewer('panorama', {
                "type": "equirectangular",
                "panorama": "{{ asset('models/model.jpg') }}",
                "autoLoad": true,
                "yaw": 0,
                "pitch": 0,
                "hfov": 100,
                "mouseZoom": false,
                "disableZoom": true,
                "showControls": false,
                "keyboardZoom": false,
                "hotSpots": [
                    // 6 cercles bleus vides
                    { "pitch": 2, "yaw": 13, "type": "custom", "cssClass": "hotspot-circle" },  //bon point en bas
                    { "pitch": 25, "yaw": 14, "type": "custom", "cssClass": "hotspot-circle" },  //bon point en haut
                    { "pitch": 5, "yaw": 0, "type": "custom", "cssClass": "hotspot-circle" },
                    { "pitch": 3, "yaw": -5, "type": "custom", "cssClass": "hotspot-circle" },  //le plus a gauche
                    { "pitch": 0, "yaw": 20, "type": "custom", "cssClass": "hotspot-circle" },
                    { "pitch": 5, "yaw": 30, "type": "custom", "cssClass": "hotspot-circle" },

                    // Image fixe de la perche
                    {
                        "pitch": 10,
                        "yaw": -15,
                        "type": "custom",
                        "cssClass": "static-image",
                        "createTooltipFunc": createStaticImage,
                        "createTooltipArgs": {}
                    }
                ]
            });

            /* Fonction pour créer l'image fixe */
            function createStaticImage(hotSpotDiv) {
                hotSpotDiv.classList.add('static-container');

                let image = document.createElement("img");
                image.src = "{{ asset('images/piquetMALT.png') }}";
                image.classList.add("piquet-image");
                hotSpotDiv.appendChild(image);
            }

        });
    </script>

    </body>

    <style>
        /* Cercles bleus vides */
        .hotspot-circle {
            width: 40px;
            height: 40px;
            border: 3px solid blue;
            background-color: transparent;
            border-radius: 50%;
            position: absolute;
            transform: translate(-50%, -50%);
            pointer-events: auto;
        }

        /* Conteneur de l’image fixe */
        .static-container {
            position: absolute;
            transform-origin: center;
        }

        /* Image fixe plus grande */
        .piquet-image {
            width: 250px; /* Augmentation de la taille */
            height: auto;
        }
    </style>

{% endblock %}
